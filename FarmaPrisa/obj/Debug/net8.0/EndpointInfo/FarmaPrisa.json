{
  "openapi": "3.0.4",
  "info": {
    "title": "FarmaPrisa",
    "version": "1.0"
  },
  "paths": {
    "/admin/usuarios": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "Devuelve el listado completo de todos los usuarios registrados (activos e inactivos). Solo Administradores.",
        "description": "Este endpoint ignora cualquier filtro global de seguridad para permitir la gestión completa.\r\nDevuelve los roles de cada usuario.",
        "responses": {
          "200": {
            "description": "Listado de todos los usuarios (incluye estado e información de roles).",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UsuarioAdminDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UsuarioAdminDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UsuarioAdminDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "No autorizado (falta token).",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Acceso denegado (el usuario no tiene el rol 'administrador').",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Admin"
        ],
        "summary": "Crea un nuevo usuario y le asigna roles específicos (ej: Entregador o Cajero). Solo Administradores.",
        "description": "Requiere el rol 'administrador'. Este endpoint permite registrar empleados o administradores directamente.",
        "requestBody": {
          "description": "Datos del nuevo usuario y lista de Roles a asignar (por nombre).",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UsuarioAdminCreateDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UsuarioAdminCreateDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UsuarioAdminCreateDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usuario creado y roles asignados exitosamente. Devuelve el ID del nuevo usuario.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos (ej. Correo ya existe).",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              }
            }
          },
          "403": {
            "description": "Acceso denegado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Error interno (ej. Rol no encontrado o fallo en la BD)."
          }
        }
      }
    },
    "/admin/usuarios/{id}/toggle-status": {
      "put": {
        "tags": [
          "Admin"
        ],
        "summary": "Alterna (Bloquea/Desbloquea) el acceso de un usuario al sistema. Solo Administradores.",
        "description": "Requiere el rol 'administrador'. Este endpoint invierte el estado actual de 'EstaActivo'.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID del usuario a modificar.",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Alternancia de estado exitosa. Devuelve un ApiResultDto.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              }
            }
          },
          "404": {
            "description": "Usuario no encontrado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/admin/productos/{id}/galeria": {
      "post": {
        "tags": [
          "Admin"
        ],
        "summary": "Sube múltiples imágenes para la galería de un producto existente. Solo Administradores.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RolDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RolDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RolDto"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/admin/roles": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "Sube múltiples imágenes para la galería de un producto existente. Solo Administradores.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RolDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RolDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RolDto"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/admin/usuarios/{id}/roles": {
      "put": {
        "tags": [
          "Admin"
        ],
        "summary": "Sincroniza la lista completa de roles asignados a un usuario. Solo Administradores.",
        "description": "Este endpoint requiere la lista *completa* de IDs de roles que el usuario debe tener. \r\nLos roles existentes que no estén en la lista enviada serán eliminados.\r\nRequiere el rol 'administrador'.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID del usuario cuyos roles serán actualizados.",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "requestBody": {
          "description": "Objeto con la lista de IDs de roles que el usuario debe tener.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRolesUpdateDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRolesUpdateDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UserRolesUpdateDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sincronización de roles exitosa."
          },
          "400": {
            "description": "Datos de entrada inválidos (ej: RolId inexistente).",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Usuario no encontrado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Acceso denegado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/Auth/register": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Crea una nueva cuenta de cliente en la plataforma.",
        "description": "Este endpoint recibe los datos del nuevo usuario, verifica que el correo no esté en uso,\r\nhashea la contraseña de forma segura y finalmente almacena el registro en la base de datos.\r\nAl registrarse, al usuario se le asigna automáticamente el rol de 'Cliente'.",
        "requestBody": {
          "description": "Objeto que contiene la información del usuario: NombreCompleto, Email, Password y PaisId.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRegisterDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRegisterDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UserRegisterDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Registro exitoso. Devuelve un mensaje de confirmación.",
            "content": {
              "text/plain": {
                "schema": { }
              },
              "application/json": {
                "schema": { }
              },
              "text/json": {
                "schema": { }
              }
            }
          },
          "400": {
            "description": "Error en la solicitud. Ocurre si el correo ya está registrado o los datos son inválidos.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              },
              "application/json": {
                "schema": {
                  "type": "string"
                }
              },
              "text/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor. Ocurre si el rol 'Cliente' no se encuentra en la base de datos.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              },
              "application/json": {
                "schema": {
                  "type": "string"
                }
              },
              "text/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/Auth/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Inicia sesión para un usuario existente y genera un token de acceso.",
        "description": "Este endpoint valida las credenciales del usuario (email y contraseña).\r\nUtiliza BCrypt para comparar de forma segura la contraseña proporcionada con el hash almacenado.\r\nSi la autenticación es exitosa, devuelve un token JWT que debe ser utilizado en la cabecera 'Authorization'\r\nde las siguientes peticiones a endpoints protegidos (Ej: 'Bearer {token}').",
        "requestBody": {
          "description": "Objeto que contiene el Email y la Contraseña del usuario.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLoginDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLoginDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UserLoginDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Autenticación exitosa. Devuelve un objeto que contiene el token JWT.",
            "content": {
              "text/plain": {
                "schema": { }
              },
              "application/json": {
                "schema": { }
              },
              "text/json": {
                "schema": { }
              }
            }
          },
          "401": {
            "description": "Credenciales incorrectas. Ocurre si el email no existe o la contraseña es errónea.",
            "content": {
              "text/plain": {
                "schema": { }
              },
              "application/json": {
                "schema": { }
              },
              "text/json": {
                "schema": { }
              }
            }
          }
        }
      }
    },
    "/Brands": {
      "get": {
        "tags": [
          "Brands"
        ],
        "summary": "Devuelve Listado De Marcas.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GenericBrandDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GenericBrandDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GenericBrandDto"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Brands"
        ],
        "summary": "Crear Nueva Marca.\r\nSolo Administradores.",
        "requestBody": {
          "description": "",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GenericBrandDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/GenericBrandDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/GenericBrandDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "put": {
        "tags": [
          "Brands"
        ],
        "summary": "Actualizar Marcas.\r\nSolo Administradores.",
        "requestBody": {
          "description": "",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GenericBrandDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/GenericBrandDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/GenericBrandDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/Brands/{id}": {
      "get": {
        "tags": [
          "Brands"
        ],
        "summary": "Devuelve Listado De Marcas Por Id.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "delete": {
        "tags": [
          "Brands"
        ],
        "summary": "Desactivar Marcas.\r\nSolo Administradores.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/Categorias": {
      "post": {
        "tags": [
          "Categorias"
        ],
        "summary": "Crea una nueva categoría o subcategoría en el catálogo. Solo accesible para Administradores.",
        "description": "Utiliza 'CategoriaPadreId' para crear una subcategoría vinculada a una categoría principal existente.\r\nRequiere el rol 'administrador'.",
        "requestBody": {
          "description": "Datos de la nueva categoría (Nombre, Descripción, CategoriaPadreId opcional).",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CategoriaCreateUpdateDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CategoriaCreateUpdateDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CategoriaCreateUpdateDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Categoría creada exitosamente. Devuelve el ID de la nueva categoría.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/CategoriaDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoriaDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoriaDto"
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Categorias"
        ],
        "summary": "Obtiene el catálogo completo de categorías con su estructura jerárquica (padre/hijo).",
        "description": "Este endpoint es utilizado por el panel de administración para mostrar el árbol de navegación.\r\nNo está protegido, ya que el catálogo de categorías es público.",
        "responses": {
          "200": {
            "description": "Devuelve un listado de categorías raíz con sus subcategorías anidadas.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CategoriaDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CategoriaDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CategoriaDto"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/Categorias/categoria/{id}/detalles": {
      "get": {
        "tags": [
          "Categorias"
        ],
        "summary": "4\r\n            endpoint de filtro de categorias,marcas y  productos",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/Categorias/{id}": {
      "put": {
        "tags": [
          "Categorias"
        ],
        "summary": "Actualiza el nombre, descripción y/o jerarquía de una categoría existente. Solo Administradores.",
        "description": "Este endpoint permite renombrar o mover una categoría a otra categoría padre.\r\nRequiere el rol 'administrador'.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID de la categoría a actualizar.",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "requestBody": {
          "description": "Datos de la categoría a actualizar (se actualiza solo lo que se envía).",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CategoriaCreateUpdateDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CategoriaCreateUpdateDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CategoriaCreateUpdateDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Actualización exitosa."
          },
          "400": {
            "description": "Datos de entrada inválidos (ej. ID de padre inexistente).",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Categoría no encontrada.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "401": {
            "description": "No autorizado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/Currency": {
      "get": {
        "tags": [
          "Currency"
        ],
        "summary": "Devuelve listado de monedas.",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "post": {
        "tags": [
          "Currency"
        ],
        "summary": "Crea Monedas. Solo Administradores.",
        "requestBody": {
          "description": "",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCurrencyDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCurrencyDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCurrencyDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/Currency/{id}": {
      "get": {
        "tags": [
          "Currency"
        ],
        "summary": "Devuelve Listado De Monedas Por Id.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "put": {
        "tags": [
          "Currency"
        ],
        "summary": "Actualiza Monedas.Solo Administradores.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "requestBody": {
          "description": "",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCurrencyDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCurrencyDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCurrencyDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "delete": {
        "tags": [
          "Currency"
        ],
        "summary": "Desactiva Monedas. Solo Administradores.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/Geografia/paises": {
      "get": {
        "tags": [
          "Geografia"
        ],
        "summary": "Recupera la lista de países disponibles en la plataforma.",
        "description": "Este endpoint consulta la tabla 'divisiones_geograficas' para obtener los registros de tipo 'País'.\r\nSe utiliza principalmente para poblar los selectores en los formularios de registro de usuarios y direcciones.\r\nDevuelve una lista simplificada (DTO) con el Id y el Nombre de cada país.",
        "responses": {
          "200": {
            "description": "Operación exitosa. Devuelve un array con los países, cada uno con su Id y Nombre.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PaisDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PaisDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PaisDto"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/HealthCheck/db-connection": {
      "get": {
        "tags": [
          "HealthCheck"
        ],
        "summary": "Realiza una prueba de conexión a la base de datos MariaDB.",
        "description": "Endpoint de diagnóstico (\"Health Check\") para verificar que la API puede establecer\r\nuna conexión exitosa con la base de datos. Es útil para monitorear el estado del servicio.",
        "responses": {
          "200": {
            "description": "Conexión exitosa. El servicio está operativo.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              },
              "application/json": {
                "schema": {
                  "type": "string"
                }
              },
              "text/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "400": {
            "description": "La conexión se intentó pero falló sin generar una excepción crítica.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              },
              "application/json": {
                "schema": {
                  "type": "string"
                }
              },
              "text/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor. La conexión falló debido a una excepción (ej. credenciales incorrectas, firewall).",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              },
              "application/json": {
                "schema": {
                  "type": "string"
                }
              },
              "text/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/comprar": {
      "post": {
        "tags": [
          "Inventory"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CompraDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CompraDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CompraDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/vender": {
      "post": {
        "tags": [
          "Inventory"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VentaDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/VentaDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/VentaDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/stock/{sucursalId}": {
      "get": {
        "tags": [
          "Inventory"
        ],
        "parameters": [
          {
            "name": "sucursalId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/stock/{sucursalId}/categoria/{categoriaId}": {
      "get": {
        "tags": [
          "Inventory"
        ],
        "parameters": [
          {
            "name": "sucursalId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "categoriaId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/ProductosExcel/importar-excel": {
      "post": {
        "tags": [
          "ProductosExcel"
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              },
              "encoding": {
                "file": {
                  "style": "form"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/Products": {
      "get": {
        "tags": [
          "Products"
        ],
        "summary": "Devuelve Listado De Todos Los Productos.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductDto"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Products"
        ],
        "summary": "Crear Nuevo Producto. Solo Administradores.",
        "requestBody": {
          "description": "",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ProductDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/Products/{id}": {
      "get": {
        "tags": [
          "Products"
        ],
        "summary": "Devuelve Listado De Productos Por ID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProductDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductDto"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Products"
        ],
        "summary": "Actualizar Productos. Solo Administradores.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "requestBody": {
          "description": "",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ProductDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "delete": {
        "tags": [
          "Products"
        ],
        "summary": "Desactivar Productos. Solo Administradores.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/Products/all-images": {
      "get": {
        "tags": [
          "Products"
        ],
        "summary": "Listar todos los productos con sus imagenes.",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/Products/{productId}/images": {
      "get": {
        "tags": [
          "Products"
        ],
        "summary": "Listar Imagenes de productos, orden, esprincipal, url\r\nse debe de especificar el id del producto.",
        "parameters": [
          {
            "name": "productId",
            "in": "path",
            "description": "",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/Products/upload-images/{productId}": {
      "post": {
        "tags": [
          "Products"
        ],
        "summary": "Subir múltiples imágenes para un producto. Solo Administradores.\r\nSe guardara en wwwroot/images del proyecto de manera publica, asignar si es principal e igual opcional establecer si es principal.",
        "parameters": [
          {
            "name": "productId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "principalIndex",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 0
            }
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "files": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    }
                  }
                }
              },
              "encoding": {
                "files": {
                  "style": "form"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/admin/Promocion": {
      "post": {
        "tags": [
          "Promocion"
        ],
        "summary": "Crea una nueva promoción y asigna productos o categorías asociadas. Solo Administradores.",
        "description": "Requiere el rol 'administrador'. La operación es transaccional.\r\nEl 'CodigoCupon' debe ser único.",
        "requestBody": {
          "description": "Datos de la promoción (descuento, fechas) y colecciones de IDs (ProductoIds, CategoriaIds).",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PromocionCreateDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/PromocionCreateDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/PromocionCreateDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Promoción creada exitosamente.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos (ej. Código de Cupón duplicado o falta de campos obligatorios).",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Promocion"
        ],
        "summary": "Devuelve el listado completo de todas las promociones activas, inactivas y futuras. Solo Administradores.",
        "description": "Requiere el rol 'administrador'. El listado incluye el conteo de productos y categorías asociadas.",
        "responses": {
          "200": {
            "description": "Listado de PromocionesAdminDto ordenadas por FechaFin.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PromocionAdminDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PromocionAdminDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PromocionAdminDto"
                  }
                }
              }
            }
          },
          "403": {
            "description": "Acceso denegado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/admin/Promocion/{id}": {
      "get": {
        "tags": [
          "Promocion"
        ],
        "summary": "Devuelve el detalle completo de una promoción, incluyendo los IDs de todos los productos y categorías asociados. Solo Administradores.",
        "description": "Requiere el rol 'administrador'. Este endpoint se usa para precargar el formulario de edición de la promoción.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID de la promoción a consultar.",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Devuelve el objeto PromocionDetalleDto completo.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/PromocionDetalleDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PromocionDetalleDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/PromocionDetalleDto"
                }
              }
            }
          },
          "404": {
            "description": "Promoción no encontrada.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Acceso denegado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Promocion"
        ],
        "summary": "Actualiza los datos principales de una promoción y sincroniza las listas de productos/categorías asociados. Solo Administradores.",
        "description": "Requiere el rol 'administrador'. Se utiliza una transacción para asegurar que la actualización de la promoción y las tablas pivote sean atómicas.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID de la promoción a actualizar.",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "requestBody": {
          "description": "Datos actualizados de la promoción (sincroniza ProductoIds y CategoriaIds).",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PromocionCreateDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/PromocionCreateDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/PromocionCreateDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Actualización exitosa.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              }
            }
          },
          "400": {
            "description": "Error en la solicitud (ej. Código de Cupón duplicado).",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              }
            }
          },
          "404": {
            "description": "Promoción no encontrada.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/admin/Promocion/{id}/toggle-status": {
      "put": {
        "tags": [
          "Promocion"
        ],
        "summary": "Alterna el estado de activación de una promoción (de activo a inactivo o viceversa). Solo Administradores.",
        "description": "Este endpoint no requiere cuerpo de solicitud. Simplemente invierte el valor actual de 'EstaActiva'.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID de la promoción a modificar.",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Cambio de estado exitoso.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              }
            }
          },
          "404": {
            "description": "Promoción no encontrada.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/admin/Proveedor": {
      "post": {
        "tags": [
          "Proveedor"
        ],
        "summary": "Registra un nuevo proveedor/laboratorio en el sistema. Solo Administradores.",
        "description": "Requiere el rol 'administrador'. Este endpoint es necesario para crear nuevos productos.",
        "requestBody": {
          "description": "Datos del nuevo proveedor.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProveedorCreateUpdateDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ProveedorCreateUpdateDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ProveedorCreateUpdateDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Proveedor creado exitosamente. Devuelve el ID generado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              }
            }
          },
          "400": {
            "description": "Error en la solicitud (ej. Nombre ya existe).",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Proveedor"
        ],
        "summary": "Devuelve el listado completo de proveedores (marcas/laboratorios) para el Panel de Administración.",
        "description": "Requiere el rol 'administrador'. Este endpoint se usa para poblar la tabla de gestión de proveedores.",
        "responses": {
          "200": {
            "description": "Listado de proveedores (Id, Nombre, LogoUrl).",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProveedorDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProveedorDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProveedorDto"
                  }
                }
              }
            }
          },
          "403": {
            "description": "Acceso denegado."
          }
        }
      }
    },
    "/admin/Proveedor/{id}": {
      "put": {
        "tags": [
          "Proveedor"
        ],
        "summary": "Actualiza la información de un proveedor/laboratorio existente. Solo Administradores.",
        "description": "Requiere el rol 'administrador'. Se aplica validación de unicidad en Nombre, Email y Identificación Fiscal.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID del proveedor a actualizar.",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "requestBody": {
          "description": "Datos del proveedor a actualizar.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProveedorCreateUpdateDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ProveedorCreateUpdateDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ProveedorCreateUpdateDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Actualización exitosa. Devuelve un mensaje de éxito.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              }
            }
          },
          "400": {
            "description": "Datos de entrada inválidos (ej. Nombre, Email o RUC ya existe en otro registro).",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              }
            }
          },
          "404": {
            "description": "Proveedor no encontrado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Proveedor"
        ],
        "summary": "Obtiene los detalles completos de un proveedor específico por su ID. Solo Administradores.",
        "description": "Requiere el rol 'administrador'. Este endpoint se usa para cargar los datos en el formulario de edición (PUT).",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID del proveedor a consultar.",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Devuelve el objeto ProveedorAdminDto completo.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProveedorAdminDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProveedorAdminDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProveedorAdminDto"
                }
              }
            }
          },
          "404": {
            "description": "Proveedor no encontrado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Acceso denegado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/admin/Proveedor/{id}/toggle-status": {
      "put": {
        "tags": [
          "Proveedor"
        ],
        "summary": "Alterna (Activa/Desactiva) el estado de un proveedor para mostrarlo u ocultarlo del catálogo. Solo Administradores.",
        "description": "Requiere el rol 'administrador'. Este endpoint invierte el valor actual de 'EstaActivo' (Soft Delete).",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID del proveedor a modificar.",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Alternancia de estado exitosa. Devuelve un ApiResultDto con el nuevo estado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResultDto"
                }
              }
            }
          },
          "404": {
            "description": "Proveedor no encontrado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/User/id": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Obtiene los datos de un usuario específico por su ID. (Uso administrativo).",
        "description": "Endpoint protegido, destinado al panel de administración para ver el detalle de una cuenta de usuario.\r\nLa respuesta utiliza un DTO (UserDto) para no exponer datos sensibles como el hash de la contraseña.",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "description": "El ID numérico del usuario que se desea consultar.",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Operación exitosa. Devuelve los datos del usuario solicitado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              }
            }
          },
          "403": {
            "description": "Acceso denegado. Si el usuario no tiene permisos de administrador.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "No encontrado. Si no existe un usuario con el ID proporcionado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "User"
        ],
        "summary": "Actualiza los datos de un usuario existente por su ID. (Uso administrativo).",
        "description": "Endpoint protegido, destinado al panel de administración para modificar la información de un usuario.\r\nCampos que se pueden actualizar: NombreCompleto, Telefono, EstaActivo, PuntosFidelidad, ProveedorId y PaisId.\r\nEl email y la contraseña no se modifican desde este endpoint.",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "description": "El ID numérico del usuario que se va a actualizar.",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "requestBody": {
          "description": "Objeto con los datos actualizados del usuario.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdateDto"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdateDto"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdateDto"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Actualización exitosa. No devuelve contenido."
          },
          "400": {
            "description": "Solicitud incorrecta. Si los datos enviados en el cuerpo no son válidos.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Acceso denegado. Si el usuario no tiene permisos de administrador.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "No encontrado. Si no existe un usuario con el ID proporcionado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ApiResultDto": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string",
            "nullable": true
          },
          "data": {
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "CategoriaCreateUpdateDto": {
        "required": [
          "nombre"
        ],
        "type": "object",
        "properties": {
          "nombre": {
            "minLength": 1,
            "type": "string"
          },
          "descripcion": {
            "type": "string",
            "nullable": true
          },
          "categoriaPadreId": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "CategoriaDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "nombre": {
            "type": "string",
            "nullable": true
          },
          "descripcion": {
            "type": "string",
            "nullable": true
          },
          "categoriaPadreId": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "subcategorias": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CategoriaDto"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "CompraDto": {
        "required": [
          "cantidad",
          "costo",
          "lote",
          "productoId",
          "sucursalId"
        ],
        "type": "object",
        "properties": {
          "productoId": {
            "type": "integer",
            "format": "int32"
          },
          "sucursalId": {
            "type": "integer",
            "format": "int32"
          },
          "cantidad": {
            "maximum": 2147483647,
            "minimum": 1,
            "type": "integer",
            "format": "int32"
          },
          "lote": {
            "minLength": 1,
            "type": "string"
          },
          "fechaVencimiento": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "costo": {
            "type": "number",
            "format": "double"
          }
        },
        "additionalProperties": false
      },
      "CreateCurrencyDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "nullable": true
          },
          "symbol": {
            "type": "string",
            "nullable": true
          },
          "isActive": {
            "type": "boolean"
          }
        },
        "additionalProperties": false
      },
      "GenericBrandDto": {
        "required": [
          "name"
        ],
        "type": "object",
        "properties": {
          "idBrand": {
            "type": "integer",
            "format": "int32"
          },
          "name": {
            "maxLength": 150,
            "minLength": 0,
            "type": "string"
          },
          "isActive": {
            "type": "boolean"
          }
        },
        "additionalProperties": false
      },
      "PaisDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "nombre": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ProblemDetails": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "nullable": true
          },
          "title": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "detail": {
            "type": "string",
            "nullable": true
          },
          "instance": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": { }
      },
      "ProductDetailDto": {
        "type": "object",
        "properties": {
          "idProductDetail": {
            "type": "integer",
            "format": "int32"
          },
          "productId": {
            "type": "integer",
            "format": "int32"
          },
          "detailTypeId": {
            "type": "integer",
            "format": "int32"
          },
          "detailText": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ProductDto": {
        "type": "object",
        "properties": {
          "idProduct": {
            "type": "integer",
            "format": "int32"
          },
          "name": {
            "type": "string",
            "nullable": true
          },
          "price": {
            "type": "number",
            "format": "double"
          },
          "barCode": {
            "type": "string",
            "nullable": true
          },
          "categoryId": {
            "type": "integer",
            "format": "int32"
          },
          "categoryName": {
            "type": "string",
            "nullable": true
          },
          "supplierId": {
            "type": "integer",
            "format": "int32"
          },
          "supplierName": {
            "type": "string",
            "nullable": true
          },
          "brandId": {
            "type": "integer",
            "format": "int32"
          },
          "brandName": {
            "type": "string",
            "nullable": true
          },
          "isActive": {
            "type": "boolean"
          },
          "language": {
            "type": "string",
            "nullable": true
          },
          "details": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProductDetailDto"
            },
            "nullable": true
          },
          "mainImage": {
            "$ref": "#/components/schemas/ProductImageDto"
          },
          "images": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProductImageDto"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ProductImageDto": {
        "type": "object",
        "properties": {
          "idImage": {
            "type": "integer",
            "format": "int32"
          },
          "imageUrl": {
            "type": "string",
            "nullable": true
          },
          "order": {
            "type": "integer",
            "format": "int32"
          },
          "isMain": {
            "type": "boolean"
          }
        },
        "additionalProperties": false
      },
      "PromocionAdminDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "nombre": {
            "type": "string",
            "nullable": true
          },
          "codigoCupon": {
            "type": "string",
            "nullable": true
          },
          "tipoDescuento": {
            "type": "string",
            "nullable": true
          },
          "valorDescuento": {
            "type": "number",
            "format": "double"
          },
          "fechaInicio": {
            "type": "string",
            "format": "date-time"
          },
          "fechaFin": {
            "type": "string",
            "format": "date-time"
          },
          "estaActiva": {
            "type": "boolean",
            "nullable": true
          },
          "totalProductosAsociados": {
            "type": "integer",
            "format": "int32"
          },
          "totalCategoriasAsociadas": {
            "type": "integer",
            "format": "int32"
          }
        },
        "additionalProperties": false
      },
      "PromocionCreateDto": {
        "required": [
          "codigoCupon",
          "fechaFin",
          "fechaInicio",
          "nombre",
          "tipoDescuento",
          "valorDescuento"
        ],
        "type": "object",
        "properties": {
          "nombre": {
            "minLength": 1,
            "type": "string"
          },
          "codigoCupon": {
            "minLength": 1,
            "type": "string"
          },
          "tipoDescuento": {
            "minLength": 1,
            "type": "string"
          },
          "valorDescuento": {
            "maximum": 100000,
            "minimum": 0.01,
            "type": "number",
            "format": "double"
          },
          "fechaInicio": {
            "type": "string",
            "format": "date-time"
          },
          "fechaFin": {
            "type": "string",
            "format": "date-time"
          },
          "descripcion": {
            "type": "string",
            "nullable": true
          },
          "productoIds": {
            "type": "array",
            "items": {
              "type": "integer",
              "format": "int32"
            },
            "nullable": true
          },
          "categoriaIds": {
            "type": "array",
            "items": {
              "type": "integer",
              "format": "int32"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "PromocionDetalleDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "nombre": {
            "type": "string",
            "nullable": true
          },
          "codigoCupon": {
            "type": "string",
            "nullable": true
          },
          "tipoDescuento": {
            "type": "string",
            "nullable": true
          },
          "valorDescuento": {
            "type": "number",
            "format": "double"
          },
          "fechaInicio": {
            "type": "string",
            "format": "date-time"
          },
          "fechaFin": {
            "type": "string",
            "format": "date-time"
          },
          "estaActiva": {
            "type": "boolean",
            "nullable": true
          },
          "productosAsociadosIds": {
            "type": "array",
            "items": {
              "type": "integer",
              "format": "int32",
              "nullable": true
            },
            "description": "Lista de IDs de productos a los que aplica la promoción.",
            "nullable": true
          },
          "categoriasAsociadasIds": {
            "type": "array",
            "items": {
              "type": "integer",
              "format": "int32"
            },
            "description": "Lista de IDs de categorías a las que aplica la promoción.",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ProveedorAdminDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "nombre": {
            "type": "string",
            "nullable": true
          },
          "descripcion": {
            "type": "string",
            "nullable": true
          },
          "logoUrl": {
            "type": "string",
            "nullable": true
          },
          "direccion": {
            "type": "string",
            "nullable": true
          },
          "nombreContacto": {
            "type": "string",
            "nullable": true
          },
          "emailContacto": {
            "type": "string",
            "nullable": true
          },
          "telefonoContacto": {
            "type": "string",
            "nullable": true
          },
          "identificacionFiscal": {
            "type": "string",
            "nullable": true
          },
          "estaActivo": {
            "type": "boolean"
          }
        },
        "additionalProperties": false
      },
      "ProveedorCreateUpdateDto": {
        "required": [
          "nombre"
        ],
        "type": "object",
        "properties": {
          "nombre": {
            "minLength": 1,
            "type": "string"
          },
          "descripcion": {
            "type": "string",
            "nullable": true
          },
          "logoUrl": {
            "type": "string",
            "nullable": true
          },
          "direccion": {
            "type": "string",
            "nullable": true
          },
          "nombreContacto": {
            "type": "string",
            "nullable": true
          },
          "emailContacto": {
            "type": "string",
            "format": "email",
            "nullable": true
          },
          "telefonoContacto": {
            "type": "string",
            "nullable": true
          },
          "identificacionFiscal": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ProveedorDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "nombre": {
            "type": "string",
            "nullable": true
          },
          "logoUrl": {
            "type": "string",
            "nullable": true
          },
          "estaActivo": {
            "type": "boolean",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "RolDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "nombre": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "UpdateCurrencyDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "nullable": true
          },
          "symbol": {
            "type": "string",
            "nullable": true
          },
          "isActive": {
            "type": "boolean"
          }
        },
        "additionalProperties": false
      },
      "UserDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "nombreCompleto": {
            "type": "string",
            "nullable": true
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "telefono": {
            "type": "string",
            "nullable": true
          },
          "estaActivo": {
            "type": "boolean"
          },
          "proveedorId": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "paisId": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "puntosFidelidad": {
            "type": "integer",
            "format": "int32"
          },
          "fechaCreacion": {
            "type": "string",
            "format": "date-time"
          },
          "fechaActualizacion": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "UserLoginDto": {
        "required": [
          "email",
          "password"
        ],
        "type": "object",
        "properties": {
          "email": {
            "minLength": 1,
            "type": "string",
            "format": "email"
          },
          "password": {
            "minLength": 1,
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "UserRegisterDto": {
        "required": [
          "email",
          "nombreCompleto",
          "paisId",
          "password"
        ],
        "type": "object",
        "properties": {
          "nombreCompleto": {
            "minLength": 1,
            "type": "string"
          },
          "email": {
            "minLength": 1,
            "type": "string",
            "format": "email"
          },
          "password": {
            "minLength": 6,
            "type": "string"
          },
          "paisId": {
            "maximum": 2147483647,
            "minimum": 1,
            "type": "integer",
            "format": "int32"
          }
        },
        "additionalProperties": false
      },
      "UserRolesUpdateDto": {
        "required": [
          "rolIds"
        ],
        "type": "object",
        "properties": {
          "rolIds": {
            "type": "array",
            "items": {
              "type": "integer",
              "format": "int32"
            },
            "description": "Lista de IDs de los roles que el usuario debe tener. \r\nEsta lista reemplazará por completo los roles actuales del usuario."
          }
        },
        "additionalProperties": false
      },
      "UserUpdateDto": {
        "type": "object",
        "properties": {
          "nombreCompleto": {
            "type": "string",
            "nullable": true
          },
          "telefono": {
            "type": "string",
            "nullable": true
          },
          "estaActivo": {
            "type": "boolean"
          },
          "puntosFidelidad": {
            "type": "integer",
            "format": "int32"
          },
          "proveedorId": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "paisId": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "DTO con los campos que se pueden actualizar de un usuario."
      },
      "UsuarioAdminCreateDto": {
        "required": [
          "email",
          "nombreCompleto",
          "paisId",
          "password"
        ],
        "type": "object",
        "properties": {
          "nombreCompleto": {
            "minLength": 1,
            "type": "string"
          },
          "email": {
            "minLength": 1,
            "type": "string",
            "format": "email"
          },
          "password": {
            "minLength": 6,
            "type": "string"
          },
          "paisId": {
            "type": "integer",
            "format": "int32"
          },
          "roles": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "UsuarioAdminDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "nombreCompleto": {
            "type": "string",
            "nullable": true
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "telefono": {
            "type": "string",
            "nullable": true
          },
          "estaActivo": {
            "type": "boolean",
            "nullable": true
          },
          "puntosFidelidad": {
            "type": "integer",
            "format": "int32"
          },
          "fechaCreacion": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "fechaActualizacion": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "roles": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "VentaDto": {
        "required": [
          "cantidad",
          "productoId",
          "sucursalId"
        ],
        "type": "object",
        "properties": {
          "productoId": {
            "type": "integer",
            "format": "int32"
          },
          "sucursalId": {
            "type": "integer",
            "format": "int32"
          },
          "cantidad": {
            "maximum": 2147483647,
            "minimum": 1,
            "type": "integer",
            "format": "int32"
          }
        },
        "additionalProperties": false
      }
    },
    "securitySchemes": {
      "Bearer": {
        "type": "http",
        "description": "Por favor, introduce 'Bearer' seguido de un espacio y tu token",
        "scheme": "Bearer",
        "bearerFormat": "JWT"
      }
    }
  },
  "security": [
    {
      "Bearer": [ ]
    }
  ]
}